/****************************************************************************
 ** @license
 ** This file is part of yFiles for HTML 2.6.0.4.
 **
 ** yWorks proprietary/confidential. Use is subject to license terms.
 **
 ** Copyright (c) 2024 by yWorks GmbH, Vor dem Kreuzberg 28,
 ** 72070 Tuebingen, Germany. All rights reserved.
 **
 ***************************************************************************/
import y from"./core.js";import l from"./lang.js";import _a_ from"./algorithms.js";import _b_ from"./layout-core.js";import _c_ from"./layout-hierarchic.js";import _d_ from"./router-other.js";_a_.lang=l,_b_.lang=l,_c_.lang=l,_d_.lang=l,function($,f,n,t){"use strict";function i(f){var n=new $.C.GGD,t=n.$iuy;t.$iRy=new $.C.DHD.$D(0,!1),t.$zDy=60,t.$nCy=20;var i=n.$ouy;switch(f.$f7){case-1:i.$kby=0;break;case 0:i.$kby=.5;break;case 1:i.$kby=1}return n}function r($,f,n){for(var t=0,i=0,r=f.$pIy();r.$uS;r.$dX()){var l=r.$GT;1===n.$oY(l)?l.$f7>0&&i++:t+=l.$f6}return i<=1&&2===t}function l(f,n,t){var i=n.$qYz($.O.$p56);f.$f16=n.$ALz(),f.$f17=n.$ALz(),f.$f3=n.$ALz(),f.$f4=n.$ALz(),f.$f12 instanceof $.C.GGD&&0!==f.$f20&&(f.$f=f.$f12.$Xlz(n)),function(f,n,t){f.$f5=$.HF.$m14(n.$oE),f.$f1=new $.LE;var i=new $.LE;f.$f11=new $.C.RKB.$C,f.$f2=n.$BLz(),f.$f15=n.$BLz(),f.$f6=n.$BLz(),f.$f9=n.$BLz(),f.$f8=n.$BLz(),f.$f19=new $.SE;for(var r=n.$DMz();r.$uS;r.$dX()){var l=new $.C.RKB.$C,a=r.$GT;f.$f2.$Re(a,"n"+a.$op),1===n.$qYz($.O.$p56).$oY(a)?e(f,a,l):o(f,a,l);var s=new $.LE;s.$m(l),u(f,l,s);for(var z=0;z<s.$vL;z++)if((l=s.$yL(z)).$f1>1){for(var h=new $.LH.$c1("GN"),d=0;d<l.$f1;d++)h.$m2($.PF.$m8(l.$yL(d).$op)),h.$m2("/");i.$m(h.toString()),f.$f1.$m(l)}}for(var v=0;v<f.$f1.$vL;v++){var m=new $.C.JJB(0,0,0,0),y=n.$rKz(),l=f.$f1.$yL(v);f.$f11.$m6(y);for(var c=0;c<l.$f1;c++){var T=l.$yL(c);f.$f15.$Re(T,i.$yL(v)),f.$f9.$Re(T,t),f.$f8.$Re(T,m)}f.$f8.$Re(y,m),f.$f6.$UN(y,!0),f.$f2.$Re(y,i.$yL(v))}n.$zoz($.O.$p4,f.$f2),n.$zoz($.O.$p36,f.$f15),n.$zoz($.O.$p3,f.$f6),n.$zoz($.O.$p70,f.$f8),n.$zoz($.O.$p26,f.$f9)}(f,n,t);for(var r=n.$qYz($.O.$p1),l=n.$DMz();l.$uS;l.$dX()){var a=l.$GT;if(1===n.$qYz($.O.$p56).$oY(a)){for(var s=null,z=a.$qaz(null);z.$uS;z.$dX()){var h=z.$FT.$f3;if(null===s&&(s=h),n.$Dqz(z.$FT,new $.C.SJB.$D(0,n.$m38(z.$FT.$f2).$dU/2)),n.$Fqz(z.$FT,new $.C.SJB.$D(0,-n.$m38(z.$FT.$f3).$dU/2)),f.$f3.$Re(z.$FT,$.T.ADD.$D(2,!0)),f.$f4.$Re(z.$FT,$.T.ADD.$D(1,!0)),null!==f.$f&&s!==h){var d=null===r?s:r.$oY(s),v=null===r?h:r.$oY(h);(4===f.$f20||3===f.$f20)!==(2===i.$oY(h))?f.$f.$Kh(d,v):f.$f.$Nh(d,v)}}for(var m=new $.LE,y="CG"+a.$op,c=a.$qaz(null);c.$uS;c.$dX()){var T=c.$FT;f.$f16.$Re(T,y);var p=f.$f15.$oY(T.$f3);null!==p&&-1!==m.indexOf(p)||(f.$f17.$Re(T,y),null!==p&&m.$m(p))}}}n.$zoz($.O.$p120,f.$f16),n.$zoz($.O.$p121,f.$f17),n.$zoz($.O.$p181,f.$f3),n.$zoz($.O.$p182,f.$f4)}function e(f,n,t){if(1!==n.$f2.$qYz($.O.$p56).$oY(n))throw $.NG.$m30(p[5]);if(!f.$f5[n.$op]){t.$m6(n),f.$f5[n.$op]=!0;for(var i=0,r=n.$eNz();r.$uS;r.$dX())if(o(f,r.$GT,t),++i>2)throw $.NG.$m30(p[6])}}function o(f,n,t){if(1===n.$f2.$qYz($.O.$p56).$oY(n))throw $.NG.$m30(p[7]);if(!f.$f5[n.$op]){t.$m6(n),f.$f5[n.$op]=!0;for(var i=n.$UNz();i.$uS;i.$dX())e(f,i.$GT,t)}}function u(f,n,t){var i=-1,r=-1;for(i=0;i<n.$f1;i++){var l=n.$yL(i);if(1===l.$f2.$qYz($.O.$p56).$oY(l)){for(var e=l.$UNz();e.$uS&&!((r=n.indexOf(e.$GT))>-1);e.$dX());if(r>-1)break}}if(-1!==r){var o=new $.C.RKB.$C,z=n.$yL(i),h=n.$yL(r),d=new $.C.RKB.$C;n.$pR(h),o.$m6(h);for(e=h.$UNz();e.$uS;e.$dX()){var v=e.$GT;n.$pR(v),o.$m6(v);for(var m=v.$eNz();m.$uS;m.$dX()){var y=m.$GT;y!==h&&(a(f,v,y,z,h)?s(f,v,n,o):d.$m6(v))}}if(n.$qJy()){n.$yPz(o),d.$lR(),n.$pR(h),o.$m6(h);for(e=h.$UNz();e.$uS;e.$dX()){v=e.$GT;n.$pR(v),o.$m6(v),d.$m6(v)}}for(e=d.$pIy();e.$uS;e.$dX())for(var c=e.$GT.$tYz(null);c.$uS;c.$dX())if(c.$FT.$f2!==h){var T=h.$f2;T.$Dqz(c.$FT,new $.C.SJB.$D(0,0)),T.$Fqz(c.$FT,new $.C.SJB.$D(0,0)),f.$f3.$Re(c.$FT,$.T.ADD.$D(0,!0)),f.$f4.$Re(c.$FT,$.T.ADD.$D(0,!0)),f.$f19.$m(c.$FT)}u(f,n,t),u(f,o,t),t.$m(o)}}function a(f,n,t,i,r){return function f(n,t,i,r,l,e){if(!$.QE.$m9(e,new $.T.ZED.T(t,i)))return!0;var o=!0;for(var u=i.$UNz();u.$uS;u.$dX()){var a=u.$GT;if(a!==t){if(a===r)return!1;for(var s=a.$eNz();s.$uS;s.$dX()){var z=s.$GT;if(z!==i&&!f(n,a,z,r,l,e)){o=!1;break}}}}return o}(f,n,t,i,r,new $.SE)}function s($,f,n,t){for(var i=f.$eNz();i.$uS;i.$dX()){var r=i.$GT;if(!(n.indexOf(r)<0)){n.$pR(r),t.$m6(r);for(var l=r.$UNz();l.$uS;l.$dX()){var e=l.$GT;n.indexOf(e)>-1&&(n.$pR(e),t.$m6(e),s($,e,n,t))}}}}function z($,f,n,t){for(var i=1,r=f.$eNz();r.$uS;r.$dX()){var l=r.$GT;if(l!==n&&-1===t.indexOf(l)){t.$m6(l);for(var e=l.$UNz();e.$uS;e.$dX()){var o=e.$GT;o!==f&&(i+=z($,o,l,t))}}}return i}var h=f.lang.ClassDefinition,d=(f.lang.InterfaceDefinition,f.lang.AttributeDefinition,f.lang.EnumDefinition),v=(f.lang.StructDefinition,f.lang.Abstract,f.lang.module),m=(f.lang.delegate,f.lang.Boolean,f.lang.Number,f.lang.Void,f.lang.Object),y=(f.lang.String,f.lang.decorators.Type),c=f.lang.decorators.SetterArg,T=f.lang.decorators.OptionArgs;f.lang.addMappings("yFiles-for-HTML-Complete-2.6.0.4-Evaluation (Build 78f656e575a7-09/17/2024)",{get _$_wzd(){return["alignment","$lH",y("yfiles._R.C.BFD",5)]},_$_xzd:["topLayout","$mH"],_$_awf:["partnerlessBelow","$jiy"],_$_lsg:["offsetForFamilyNodes","$Yuy"],_$_wbh:["familyNodesAlwaysBelow","$Szy"],get _$_qmh(){return["familyMembersSortingPolicy","$uEy",y("yfiles._R.C.CFD",5)]},_$_tnh:["spacingBetweenFamilyMembers","$aFy"],get _$_hqo(){return["FamilyTreeLayout","ZED",T(c("topLayout"),c("spacingBetweenFamilyMembers"),c("offsetForFamilyNodes"),c("partnerlessBelow"),c("familyNodesAlwaysBelow"),c("alignment","yfiles._R.C.BFD"),c("parallelEdgeRouterEnabled"),c("selfLoopRouterEnabled"),c("familyMembersSortingPolicy","yfiles._R.C.CFD"),c("labeling"),c("selfLoopRouter"),c("parallelEdgeRouter"),c("componentLayout"),c("subgraphLayout"),c("hideGroupsStage"),c("orientationLayout"),c("orientationLayoutEnabled"),c("layoutOrientation","yfiles._R.C.FZC"),c("labelingEnabled"),c("hideGroupsStageEnabled"),c("componentLayoutEnabled"),c("subgraphLayoutEnabled"))]},_$_iqo:["FamilyType","AFD"],_$_jqo:["VerticalNodeAlignment","BFD"],_$_kqo:["FamilyMembersSortingPolicy","CFD"],_$$_jdb:["yfiles.genealogy","yfiles._R.T","yfiles._R.C"]});var p=["Unknown alignment.","DataProvider "," is not registered to the graph.","FamilyTreeLayout","FamilyTypeDpKey","Direct link between two individuals","Family node has more than two parent nodes","Direct link between two family nodes"];v("_$$_jdb",function($){$._$_kqo=new d(function(){return{NO_SORTING:0,FEMALE_FIRST:1,FEMALE_ALWAYS_FIRST:2,MALE_FIRST:3,MALE_ALWAYS_FIRST:4}})}),v("_$$_jdb",function(n){n._$_hqo=new h(function(){return{$extends:$.C.TBD,constructor:function(){$.C.TBD.call(this),this.$f=null,this.$lzy=!1,this.$tly.$zLy=12,this.$f12=i(this)},$f16:null,$f17:null,$f3:null,$f4:null,$f19:null,$f9:null,$f2:null,$f15:null,$f6:null,$f8:null,$f21:null,$f22:null,$f12:null,$f24:!0,$f13:30,$f14:10,$f10:!0,$f18:!1,$f7:0,_$_xzd:{get:function(){return this.$f12},set:function($){this.$f12=null===$?i(this):$}},"$m1!":function(){if(!this.$f24||0!==this.$f20)return!1;var f=this.$mH;return $.C.XAD.isInstance(f)&&(f=f.$XV),f instanceof $.C.GGD},_$_tnh:{get:function(){return this.$f13},set:function(f){if(f<0)throw $.NG.$m2();this.$f13=f}},_$_lsg:{get:function(){return this.$f14},set:function(f){if(f<0)throw $.NG.$m2();this.$f14=f}},_$_awf:{get:function(){return this.$f10},set:function($){this.$f10=$}},_$_wbh:{get:function(){return this.$f18},set:function($){this.$f18=$}},_$_wzd:{get:function(){return this.$f7},set:function(f){var n=0;switch(f){case 1:n=1;break;case 0:n=.5;break;case-1:n=0;break;default:throw $.NG.$m18(p[0])}null!==this.$f12&&this.$f12 instanceof $.C.GGD&&(this.$f12.$ouy.$kby=n),this.$f7=f}},$IEy:{set:function($){this.$f49=$}},$Oxy:{set:function($){this.$f32=$}},$f20:0,$f:null,_$_qmh:{get:function(){return this.$f20},set:function(f){switch(f){case 0:case 1:case 2:case 3:case 4:this.$f20=f;break;default:throw $.NG.$m2()}}},$kaz:function(f){if(null===f.$qYz($.O.$p56))throw $.NG.$m28(p[1]+$.O.$p56+p[2]);var n=new $.C.JLB(f),t=f.$qYz($.O.$p3),i=f.$qYz($.O.$p36),r=f.$qYz($.O.$p4),e=f.$qYz($.O.$p70),o=new $.C.JLB(f),u=null,a=$.T.KLB.$O(),s=$.T.KLB.$O(),z=$.T.KLB.$O(),h=$.T.KLB.$O(),d=$.T.KLB.$M(),v=null;if(function(f,n){f.$f21=$.T.KLB.$O();var t=n.$qYz($.O.$p56);if(null!==t)for(var i=n.$DMz();i.$uS;i.$dX()){var r=i.$GT;1===t.$oY(r)&&f.$f21.$Xe(r,r.$f7)}}(this,f),function(f,n){f.$f22=$.T.KLB.$O();var t=n.$qYz($.O.$p56);if(null!==t)for(var i=n.$DMz();i.$uS;i.$dX()){var r=i.$GT;1===t.$oY(r)&&f.$f22.$Xe(r,r.$f6)}}(this,f),null!==t){u=f.$ALz();for(var y=!1,c=f.$CMz();c.$uS;c.$dX()){var T=c.$FT;t.$NN(T.$f2)!==t.$NN(T.$f3)?(u.$UN(T,!0),o.$XPz(T),y=!0):u.$UN(T,!1)}y||(f.$iXz(u),u=null);for(var L=f.$DMz();L.$uS;L.$dX()){var w=L.$GT;t.$NN(w)&&(d.$Re(r.$oY(w),w),n.$ZPz(w),a.$UN(w,!0),s.$Re(w,i.$oY(w)),z.$Re(w,r.$oY(w)),h.$Re(w,e.$oY(w)))}null!==t&&f.$Sdz($.O.$p3),null!==i&&f.$Sdz($.O.$p36),null!==r&&f.$Sdz($.O.$p4),null!==e&&f.$Sdz($.O.$p70)}var S=new $.T.ZED.T1(this);if(l(this,f,S),null!==t){var O=new $.C.NLB(f);for(L=f.$DMz();L.$uS;L.$dX()){w=L.$GT;if(O.$TVz(w)){var R=new $.LE;a.$UN(w,!1);for(var Y=O.$RVz(w).$m4();Y.$p;){var _=Y.$m(),C=i.$oY(_);if(null!==C){for(var D=0;D<R.$vL;D++)if(C===i.$oY(R.$yL(D))){C=null;break}null!==C&&R.$m(_)}}if(0===R.$vL){_=O.$RVz(w).$WKz();s.$Re(w,i.$oY(_)),z.$Re(w,r.$oY(_))}else if(s.$Re(w,i.$oY(R.$yL(0))),z.$Re(w,r.$oY(R.$yL(0))),R.$vL>1){for(var B=0;B<R.$vL;B++)for(var g=d.$oY(i.$oY(R.$yL(B))),X=0;X<R.$vL;X++){var E=d.$oY(i.$oY(R.$yL(X)));m.equals(r.$oY(E),i.$oY(g))&&R.$m3(X)}if(s.$Re(w,i.$oY(R.$yL(0))),z.$Re(w,r.$oY(R.$yL(0))),1===R.$vL);else{null===v&&(v=new $.C.RKB.$C);var F=f.$rKz();v.$m6(F),a.$UN(F,!0),z.$Re(F,F);for(D=1;D<R.$vL;D++)for(var N=R.$yL(0),G=!1;null!==N;){for(var b=d.$oY(i.$oY(N)),q=R.$yL(D);null!==q;){var M=d.$oY(i.$oY(q));if(M===b){if(R.$yL(0)!==N)for(var U=0;U<D;U++)R.$BL(U,N);R.$BL(D,q),G=!0;break}q=M}if(G)break;for(U=0;U<D;U++)R.$BL(U,N);N=b}for(D=0;D<R.$vL;D++)s.$Re(R.$yL(D),F);s.$Re(F,i.$oY(R.$yL(0))),n.$ZPz(F)}}}else a.$UN(w,!1),s.$Re(w,i.$oY(w)),z.$Re(w,r.$oY(w))}O.$CKz()}var K=new $.T.ZED.T2(this,this.$mH),A=new $.T.ZED.T4(n,t,a,s,z,h,K),x=new $.C.QBD;x.$XV=A;var Z=new $.C.KAD(x,null);Z.$eby=this.$m1();try{new $.T.ZED.T3(this,Z,S,K).$mZ(f)}finally{!function(f,n){null!==f.$f16&&(n.$Sdz($.O.$p120),n.$iXz(f.$f16),f.$f16=null),null!==f.$f17&&(n.$Sdz($.O.$p121),n.$iXz(f.$f17),f.$f17=null),null!==f.$f3&&(n.$Sdz($.O.$p181),n.$iXz(f.$f3),f.$f3=null),null!==f.$f4&&(n.$Sdz($.O.$p182),n.$iXz(f.$f4),f.$f4=null),null!==f.$f8&&(n.$Sdz($.O.$p70),n.$jXz(f.$f8),f.$f8=null),null!==f.$f9&&(n.$Sdz($.O.$p26),n.$jXz(f.$f9),f.$f9=null),null!==f.$f2&&(n.$Sdz($.O.$p4),n.$jXz(f.$f2),f.$f2=null),null!==f.$f15&&(n.$Sdz($.O.$p36),n.$jXz(f.$f15),f.$f15=null),null!==f.$f6&&(n.$Sdz($.O.$p3),n.$jXz(f.$f6),f.$f6=null),null!==f.$f&&(f.$f.$BX(),f.$f=null),f.$f19=null}(this,f),null!==t&&f.$zoz($.O.$p3,t),null!==i&&f.$zoz($.O.$p36,i),null!==r&&f.$zoz($.O.$p4,r),null!==e&&f.$zoz($.O.$p70,e)}if(n.$aKz(),null!==v){for(D=0;D<v.$f1;D++)f.$GTz(v.$yL(D));v=null}if(o.$aKz(),null!==this.$f1)for(D=0;D<this.$f1.$vL;D++)f.$GTz(this.$f11.$yL(D));if(null!==u){f.$zoz($.O.$p102,u);var V=new $.C.GLD;V.$ipy=$.O.$p102;try{V.$mZ(f)}finally{f.$Sdz($.O.$p102),f.$iXz(u)}}},$f5:null,$f1:null,$f11:null,$static:{FAMILY_TYPE_DP_KEY:null,T2:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n){$.C.RBD.call(this,n),this.$f=f,this.$f1=$.T.KLB.$N()},$f1:null,"$m!":function($){return this.$f1.$oY($)},"$mZ!":function($){if(this.$XV.$mZ($),this.$f.$m1())for(var f=$.$DMz();f.$uS;f.$dX())for(var n=f.$GT.$tYz(null);n.$uS;n.$dX()){var t=n.$FT;this.$f1.$Re(t,$.$Ldz(t))}},$f:null}}),T3:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,t,i){$.C.RBD.call(this,n),this.$f=f,this.$f2=t,this.$f1=i},$f2:null,$f1:null,"$mZ!":function(f){if(this.$f.$m1()){var n=new $.C.NLB(f),t=$.T.KLB.$O();!function(f,n,t,i){for(var l=t.$qYz($.O.$p56),e=f.$f.$f11.$pIy();e.$uS;e.$dX()){var o=e.$GT,u=n.$RVz(o);if(r(0,u,l)){i.$UN(o,!0);for(var a=u.$pIy();a.$uS;a.$dX()){var s=a.$GT;if(1!==l.$oY(s))for(var z=s.$tYz(null);z.$uS;z.$dX())f.$f.$f4.$Re(z.$FT,null)}}}}(this,n,f,t),this.$XV.$mZ(f),function(f,n,t,i,r){for(var l=n.$qYz($.O.$p56),e=f.$f.$f11.$pIy();e.$uS;e.$dX()){var o=e.$GT;if(i.$NN(o)){for(var u=t.$RVz(o),a=null,s=null,z=u.$pIy();z.$uS;z.$dX()){var h=z.$GT;1!==l.$oY(h)&&h.$f6>0&&(null===a?a=h:s=h)}if(null!==a&&null!==s){var d=n.$iTz(a),v=n.$iTz(s),m=r.$m(a.$f11).$f,y=r.$m(s.$f11).$f;if(d>v&&m<y||d<v&&m>y){var c=n.$jYz(o);for(z=u.$pIy();z.$uS;z.$dX()){h=z.$GT;var T=c.$f+c.$f3-(n.$iTz(h)-c.$f);n.$Nsz(h,T,n.$jTz(h))}}}}}}(this,f,n,t,this.$f1),function(f,n,t,i){for(var r=n.$qYz($.O.$p56),l=f.$f.$f11.$pIy();l.$uS;l.$dX()){var e=l.$GT;if(i.$NN(e))for(var o=t.$RVz(e).$pIy();o.$uS;o.$dX()){var u=o.$GT;if(1!==r.$oY(u))for(var a=u.$tYz(null);a.$uS;a.$dX()){var s=a.$FT;n.$Fqz(s,new $.C.SJB.$D(0,-n.$m38(u).$dU/2)),f.$f.$f4.$Re(s,$.T.ADD.$D(1,!0))}}}}(this,f,n,t),f.$zoz($.O.$p70,this.$f.$f8);var i=this.$f1.$XV;i.$mLy=0,this.$f2.$f1=!0,this.$XV.$mZ(f),i.$mLy=1,this.$f2.$f1=!1,f.$Sdz($.O.$p163),n.$CKz()}else this.$XV.$mZ(f)},$f:null}}),T4:new h(function(){return{$extends:$.C.RBD,$final:!0,constructor:function(f,n,t,i,r,l,e){$.C.RBD.call(this,e),this.$f=f,this.$f1=n,this.$f2=t,this.$f5=i,this.$f4=r,this.$f3=l},"$mZ!":function(f){var n=new $.C.RKB.$D(this.$f.$ZNz());this.$f.$aKz(),null!==this.$f1&&(f.$zoz($.O.$p3,this.$f2),f.$zoz($.O.$p36,this.$f5),f.$zoz($.O.$p4,this.$f4),f.$zoz($.O.$p70,this.$f3)),this.$oJz(f),this.$f.$aPz(n),f.$Sdz($.O.$p3),f.$Sdz($.O.$p36),f.$Sdz($.O.$p4),f.$Sdz($.O.$p70)},$f:null,$f1:null,$f2:null,$f5:null,$f4:null,$f3:null}}),T:new h(function(){return{$final:!0,constructor:function($,f){this.$f1=$,this.$f=f},$f1:null,$f:null,"equals!":function($){if(this===$)return!0;if(null===$||f.lang.getType(this)!==f.lang.getType($))return!1;var n=$;return this.$f===n.$f&&this.$f1===n.$f1},"hashCode!":function(){var $=this.$f1.hashCode();return $=31*$+this.$f.hashCode()}}}),T1:new h(function(){return{$final:!0,$with:[$.C.VAD],constructor:function(f){this.$f=f,this.$f1=!1,this.$f3=$.T.KLB.$O(),this.$f2=new $.T.ZED.T1.T(this,this.$f3,this.$f.$f21)},$f1:!1,$f2:null,$f3:null,"$mZ!":function(f){if(1!==f.$oE){if(2===f.$oE&&this.$f.$f10&&this.$f.$f22.$uY(f.$nE)<2&&this.$f.$f22.$uY(f.$CB)<2){for(var n=null,t=null,i=f.$DMz();i.$uS;i.$dX()){var r=i.$GT;1!==f.$qYz($.O.$p56).$oY(r)?n=r:t=r}if(null!==n&&null!==t){var l=f.$m38(n),e=f.$m38(t);l.$df(-l.$HU/2,0),e.$df(-e.$HU/2,l.$dU+this.$f.$f14);for(var o=t.$tYz(null);o.$uS;o.$dX()){var u=o.$FT;($$=f.$m37(u)).$PY(),$$.$qV=new $.C.SJB.$D(0,0),$$.$rV=new $.C.SJB.$D(0,0)}var a=this.$f.$f8.$oY(n),s=new $.C.JJB(a.top,a.left,-this.$f.$f14-f.$m38(t).$dU,a.right);return void this.$f.$f8.$Re(n,s)}}var h=new $.C.RKB.$C;if(this.$f1)h.$xPz(f.$DMz()),h.$bPz(new $.T.ZED.T1.T1(this,f));else{var d=new $.C.RKB.$C,v=new $.C.RKB.$C;for(i=f.$DMz();i.$uS;i.$dX()){r=i.$GT;1!==f.$qYz($.O.$p56).$oY(r)?d.$m6(r):v.$m6(r)}for(var m=null,y=0,c=0;c<d.$f1;c++){(j=d.$yL(c)).$UNz().$ET>y&&(y=j.$UNz().$ET,m=j)}d.$pR(m),h.$m6(m),function f(n,t,i,r,l){for(var e=new $.C.RKB.$C,o=l.$UNz();o.$uS;o.$dX()){var u=o.$GT;if(i.$pR(u)){var a=z(n,u,l,new $.C.RKB.$E(l));n.$f3.$Xe(u,a),e.$m6(u)}}e.$bPz(n.$f2);var s=l.$f2.$qYz($.O.$p56),h=!1;if(1===e.$f1&&r.indexOf(l)===r.$f1-1&&(h=!0),2===n.$f.$f20||4===n.$f.$f20)for(var d=0;d<e.$f1;d++)4===n.$f.$f20===(2===s.$oY(l))?r.$m6(e.$yL(d)):r.$tR(0,e.$yL(d));else if(0!==n.$f.$f20&&1===r.$f1&&1===e.$f1)3===n.$f.$f20===(2===s.$oY(l))?r.$m6(e.$yL(0)):r.$tR(0,e.$yL(0));else{var v=r.indexOf(l),m=r.indexOf(l)+1;for(d=0;d<e.$f1;d++)d%2!==0||h?r.$tR(m,e.$yL(d)):r.$tR(v,e.$yL(d)),m++}var y=new $.C.RKB.$C;for(d=0;d<e.$f1;d++){for(var c=!1,T=null,p=(u=e.$yL(d)).$eNz();p.$uS;p.$dX())if((T=p.$GT)!==l){c=!0;break}if(t.$pR(T)){y.$m6(T);var L=r.indexOf(u);r.indexOf(l)>L?r.$tR(r.indexOf(u),T):r.$tR(r.indexOf(u)+1,T)}else if(c){var w=0;for(r.$pR(u),p=u.$eNz();p.$uS;p.$dX())w=Math.max(r.indexOf(p.$GT),w);r.$tR(w,u)}}e=null;for(d=0;d<y.$f1;d++)f(n,t,i,r,y.$yL(d))}(this,d,v,h,m)}var T=new $.C.RKB.$C,p=new $.C.RKB.$C,L=new $.LE,w=0,S=0,O=Number.MAX_VALUE;for(c=0;c<h.$f1;c++){r=h.$yL(c);var R=f.$m38(r);1===f.$qYz($.O.$p56).$oY(r)?(T.$m6(r),L.$m(c),R.$df(w+Math.max((this.$f.$f13-R.$HU)/2,R.$HU/4),-R.$dU/2),w=w+Math.max(1.5*R.$HU,this.$f.$f13)|0):(p.$m6(r),O=Math.min(R.$dU,O),S=Math.max(R.$dU,S),R.$df(w,-R.$dU/2),w=w+R.$HU|0)}if(0!==this.$f.$f7)for(c=0;c<p.$f1;c++){R=f.$m38(p.$yL(c));1===this.$f.$f7?R.$df(R.$sS,-(R.$dU-O/2)):R.$df(R.$sS,-O/2)}var Y=$.HF.$m11(h.$f1),_=-2;for(c=0;c<T.$f1;c++){var C=T.$yL(c),D=!1,B=$.ZE.$m8(L.$yL(c));if(this.$f.$f18||_===B-1&&0===Y[_])D=!0;else for(var g=C.$eNz();g.$uS;g.$dX()){var X=g.$GT,E=h.indexOf(X)-B;if(Math.abs(E)>2){D=!0;break}}if(D)Y[B]=1;else{var F=new $.C.SJB.$D(0,0);for(o=C.$tYz(null);o.$uS;o.$dX()){u=o.$FT;if(($$=f.$m37(u)).$PY(),0===this.$f.$f7)$$.$qV=F;else{R=f.$m38(u.$f2);f.$Cqz(u,new $.C.SJB.$D(R.$sS+R.$HU/2,0))}$$.$rV=F}T.$m9(c),L.$m3(c),c--}_=B}var N,G=S/2;1===this.$f.$f7?G=O/2:-1===this.$f.$f7&&(G=S-O/2),N=G;for(c=0;c<T.$f1;c++){C=T.$yL(c);for(var b=$.ZE.$m8(L.$yL(c)),q=0,M=C.$eNz();M.$uS;M.$dX()){for(var U=h.indexOf(M.$GT),K=Math.min(b,U),A=Math.max(b,U),x=0,Z=K;Z<=A;Z++)x+=Y[Z];q=Math.max(x,q)}R=f.$m38(C);var V=G+this.$f.$f14+(R.$dU+this.$f.$f14)*(q-1);R.$df(R.$sS,V),N=Math.max(N,V+R.$dU)}for(var k=0;k<p.$f1;k++){var j=p.$yL(k),H=h.indexOf(j),I=0,J=new $.C.VIB.$C;for(o=j.$qaz(null);o.$uS;o.$dX()){u=o.$FT;Y[h.indexOf(u.$f3)]>0&&(J.$m6(u),I++)}if(I>0){var P=f.$m38(j).$HU/(I+1),W=$.HF.$m11(J.$f1),Q=$.HF.$m11(J.$f1);for(c=0;c<J.$f1;c++){W[c]=h.indexOf(J.$yL(c).$f3)-H,W[c]>0&&(W[c]-=2*h.$f1),Q[c]=P;for(Z=0;Z<c;Z++)W[c]>W[Z]?Q[Z]+=P:Q[c]+=P}for(c=0;c<J.$f1;c++){var $$;u=J.$yL(c);($$=f.$m37(u)).$PY(),$$.$rV=new $.C.SJB.$D(0,0);var f$=f.$m38(j),n$=f.$m38(u.$f3),t$=this.$f.$f19.$HM(u)?f$.$HU/2:Q[c],i$=n$.$tS+n$.$dU/2;$$.$qV=new $.C.SJB.$D(t$-f$.$HU/2,0),$$.$te(f$.$sS+t$,i$)}}}var r$=(a=this.$f.$f8.$oY(p.$yL(0))).top,l$=a.bottom;null!==a&&0===this.$f.$f7?r$=N-G:null!==a&&1===this.$f.$f7&&(l$=G-N),this.$f.$f8.$Re(p.$yL(0),new $.C.JJB(r$,a.left,l$,a.right))}},$f:null,$static:{T:new h(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f,n){this.$f1=$,this.$f=f,this.$f2=n},$f:null,$f2:null,"$uR!":function(f,n){var t=$.T.ELB.$m(this.$f.$uY(f),this.$f.$uY(n));return 0!==t?t:$.T.ELB.$m(this.$f2.$uY(f),this.$f2.$uY(n))},$f1:null}}),T1:new h(function(){return{$final:!0,$with:[$.C.EMB],constructor:function($,f){this.$f1=$,this.$f=f},$f:null,"$uR!":function(f,n){return $.T.ELB.$K(this.$f.$iTz(f),this.$f.$iTz(n))},$f1:null}})}}}),$clinit:function(){$.T.ZED.FAMILY_TYPE_DP_KEY=$.O.$m1($.C.AFD.$class,$.C.ZED.$class,p[3],p[4])}}}})}),v("_$$_jdb",function($){$._$_iqo=new d(function(){return{FAMILY:1,MALE:2,FEMALE:3}})}),v("_$$_jdb",function($){$._$_jqo=new d(function(){return{TOP:-1,CENTER:0,BOTTOM:1}})})}(y.lang.module("yfiles._R"),y,"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self);export default y;